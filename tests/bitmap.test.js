/* eslint-disable no-undef */
/* eslint-disable prettier/prettier */
const bitmap = require('../src/bitmap')();

describe('bitmap.test: return a buffer file', () => {
  test('create file', async () => {
    try {
      const stringSvg =
        '<svg width="1000" height="560" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1000 560" preserveAspectRatio="xMidYMid slice"><g><svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1000 560" preserveAspectRatio="xMidYMid slice"><g><svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1000 560" preserveAspectRatio="xMidYMid slice"><g><svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1000 560" preserveAspectRatio="xMidYMid slice"><g><svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1000 560" preserveAspectRatio="xMidYMid slice"><g><svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1000 560" preserveAspectRatio="xMidYMid slice"><g class="base"><g id="box-5cf65137c5808031709a2caf" model="table" class="draggable selectable scalable" transform="translate(0,0) scale(0.698337498307228) rotate(0)"><title>tabloska</title><rect class="main-rect" fill="#FFFFFF" stroke-width="3" stroke="#FFFFFF" width="1367" height="192"></rect><foreignObject id="table-id-5cf65137c5808031709a2caf" class="table-form" width="1347" height="202" transform="translate(10,10) scale(1)"><table class="table-form" height="202" width="1347" ><tbody><tr><td>hola{{plan-name}}</td><td style="text-align: center; ">dggf</td><td style="text-align: center; color: rgb(255, 255, 255) !important; background-color: rgb(0, 0, 0) !important;color:rgb(255, 255, 255) !important;"><span style="background-color: rgb(0, 0, 0); color: rgb(255, 255, 255);"><strong>sgfdgsdfg</strong></span></td><td><img src="//s3-eu-west-1.amazonaws.com/dev.media.kapture.io/organizations/59686dd1e4fdec2a9080de3e/partImages/5c3f35d222483322ec2e124c/vMqyNRc_2019-04-02T14:08:27.000Z.jpg" width="100px" height="100px"></td><td style="background-color: rgb(247, 150, 70) !important;background-color:rgb(247, 150, 70) !important;"><span style="background-color: rgb(247, 150, 70);">fsgsdgdf</span></td><td style="background-color: rgb(247, 150, 70) !important;background-color:rgb(247, 150, 70) !important;"><span style="background-color: rgb(247, 150, 70);">gsdgdsg</span></td></tr><tr><td>fdsf</td><td><del><em>sdgsdfg</em></del></td><td>dfsgdf</td><td>gfdgdf</td><td>dsg</td><td>dsgfg</td></tr><tr><td><ul><li>dsfsa</li></ul></td><td><ol><li>sdfgdsf</li><li>hgfjjf</li></ol><br></td><td>gsdfgsg<sub>fgdf</sub></td><td style="color: rgb(192, 80, 77) !important;color:rgb(192, 80, 77) !important;"><span style="color: rgb(192, 80, 77); font-size: x-large;">fdsg</span></td><td style="color: rgb(192, 80, 77) !important;color:rgb(192, 80, 77) !important;"><span style="color: rgb(192, 80, 77);">gsfg</span></td><td style="color: rgb(192, 80, 77) !important;color:rgb(192, 80, 77) !important;"><span style="color: rgb(192, 80, 77);">dsfgsdfg</span></td></tr><tr><td>sdgsdfgdsgf</td><td style="color: rgb(155, 187, 89) !important;color:rgb(155, 187, 89) !important;">gs<span style="color: rgb(155, 187, 89);">dfgsd</span></td><td style="text-align: center; color: rgb(155, 187, 89) !important;color:rgb(155, 187, 89) !important;"><span style="color: rgb(155, 187, 89);">ghdfhgf<sup>211</sup></span></td><td style="text-align: right;">fgsdfg</td><td style="text-align: right; ">dfgdf</td><td style="text-align: justify; ">dsfgsdfgdfsgdfsgfsdgfdgdfsgfd</td></tr></tbody></table></foreignObject></g><g class="selectable text-group"><g class="scalable text" transform="translate(459.0334930419922,250.6549072265625) scale(1) rotate(0)"><rect width="146.26560974121094" height="169.32821655273438" class="dummy" fill="rgb(63, 63, 63)"></rect><text class="dummy" width="126.26560974121094" height="149.32821655273438" x="0" y="0" dy="0.71em" fill="rgb(0, 0, 0)" data="agregue su texto aqui jejej" transform="translate(73.13280487060547, 15)" style="font-size: 20px; text-anchor: middle;"><tspan x="0" y="0" dy="0.71em">agregue su</tspan><tspan x="0" y="0" dy="1.81em">texto aqui</tspan><tspan x="0" y="0" dy="2.91em">jejej</tspan></text></g></g><g class="selectable"><line x1="278.7808532714844" y1="387.81683349609375" x2="584.0571899414062" y2="403.5965270996094" stroke="#07a2ed" stroke-width="2"></line><circle r="6" cx="278.7808532714844" cy="387.81683349609375" fill="#a0d468" class="draggable line-point first"></circle><circle r="6" cx="584.0571899414062" cy="403.5965270996094" fill="#a0d468" class="draggable line-point"></circle></g><g class="selectable"><line x1="194.4202117919922" y1="227.59226989746094" x2="221.73121643066406" y2="378.7131652832031" stroke="#07a2ed" stroke-width="2"></line><circle r="6" cx="194.4202117919922" cy="227.59226989746094" fill="#a0d468" class="draggable line-point first"></circle><circle r="6" cx="221.73121643066406" cy="378.7131652832031" fill="#a0d468" class="draggable line-point"></circle></g><g class="selectable"><line x1="345.5411071777344" y1="304.0630798339844" x2="423.8326416015625" y2="242.15814208984375" stroke="#07a2ed" stroke-width="2"></line><circle r="6" cx="345.5411071777344" cy="304.0630798339844" fill="#a0d468" class="draggable line-point first"></circle><circle r="6" cx="423.8326416015625" cy="242.15814208984375" fill="#a0d468" class="draggable line-point"></circle></g><g class="selectable"><line x1="478.45465087890625" y1="213.02639770507812" x2="531.2559204101562" y2="203.9227294921875" stroke="#07a2ed" stroke-width="2"></line><circle r="6" cx="478.45465087890625" cy="213.02639770507812" fill="#a0d468" class="draggable line-point first"></circle><circle r="6" cx="531.2559204101562" cy="203.9227294921875" fill="#a0d468" class="draggable line-point"></circle></g><g class="selectable"><line x1="829.2493286132812" y1="217.88168334960938" x2="866.2709350585938" y2="269.4691467285156" stroke="#07a2ed" stroke-width="2"></line><circle r="6" cx="829.2493286132812" cy="217.88168334960938" fill="#a0d468" class="draggable line-point first"></circle><circle r="6" cx="866.2709350585938" cy="269.4691467285156" fill="#a0d468" class="draggable line-point"></circle></g><g class="selectable"><line x1="906.3270263671875" y1="347.76068115234375" x2="902.0786743164062" y2="353.222900390625" stroke="#07a2ed" stroke-width="2"></line><circle r="6" cx="906.3270263671875" cy="347.76068115234375" fill="#a0d468" class="draggable line-point first"></circle><circle r="6" cx="902.0786743164062" cy="353.222900390625" fill="#a0d468" class="draggable line-point"></circle></g><g class="selectable"><line x1="769.7720336914062" y1="375.6785888671875" x2="825.6078491210938" y2="191.17759704589844" stroke="#07a2ed" stroke-width="2"></line><circle r="6" cx="769.7720336914062" cy="375.6785888671875" fill="#a0d468" class="draggable line-point first"></circle><circle r="6" cx="825.6078491210938" cy="191.17759704589844" fill="#a0d468" class="draggable line-point"></circle></g></g></svg></g></svg></g></svg></g></svg></g></svg></g></svg>';
      const image = await bitmap.main({ stringSvg });
      expect(image).toBeInstanceOf(Buffer);
    } catch (e) {
      throw Error(e);
    }
  });
});
